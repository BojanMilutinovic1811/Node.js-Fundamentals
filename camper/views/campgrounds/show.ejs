<% include ../partials/header %>
<div class="show-wrapper">
    <div class="show-description">
        <h3 class="title"><%= campground.location %></h3>
        <p>Created by: <%= campground.author.username %></p>

        <% if(currentUser && campground.author.id.equals(currentUser._id)) { %>
        <a href='/campgrounds/<%= campground._id %>/edit'>Edit campground</a>
        <form action="/campgrounds/<%= campground._id %>?_method=DELETE" method="POST">
            <input type="submit" value="delete">
        </form>
        <% } %>

        <p><%= campground.description %></p>

        <br>

        <a class='btn btn-large float-right' href="/campgrounds">Back toCampgrounds</a>
    </div>
    <div class="show-image-comments">
        <div class="show-image" style='background-image: url("<%= campground.image %>")'></div>
        <h4>Comments:</h4>
        <ul class="list-group show-comments">
            <% campground.comments.forEach(comment => { %>
            <li class="list-group-item">
                <span class="comment-text"><%= comment.author.username %> says: <%= comment.text %></span>

                <% if(currentUser && comment.author.id.equals(currentUser._id)) { %>

                <span class="comment-author float-right">
                    <a href="/campgrounds/<%= campground._id %>/comments/<%= comment._id %>/edit"><button><i
                                class="fas fa-edit"></i></button></a>
                    <form class="d-inline"
                        action="/campgrounds/<%= campground._id %>/comments/<%= comment._id %>?_method=DELETE"
                        method="POST">
                        <button type="submit"><i class="fas fa-trash"></i></button>
                    </form>
                </span>
                <% } %>
            </li>

            <% }) %>
        </ul>
        <a href="/campgrounds/<%= campground._id %>/comments/new" class="btn float-right btn-primary mt-3">leave a
            comment</a>
    </div>
</div>

<% include ../partials/footer %>